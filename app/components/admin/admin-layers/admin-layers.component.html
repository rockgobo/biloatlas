<div class="alert alert-danger" role="alert" ng-if="!$ctrl.security.isValid()">
    Sie müssen angemeldet sein um diesen Bereich zu nutzen
</div>

<div class="container" ng-if="$ctrl.security.isValid()">
    <div class="panel panel-default">
        <div class="panel-body">
            <a href="#/admin/topics" class="btn btn-default" role="button">Themen ändern</a>
            <a href="#/admin/layers" class="btn btn-default" role="button">Themenbereiche ändern</a>
        </div>  
    </div>
</div>

<div class="container"  ng-if="$ctrl.security.isValid()">
    <h1>Admin- Layers</h1>
    <input ng-model="$ctrl.searchterm" type="text" class="form-control" placeholder="Name der Kennzahl"/>
    <div ng-repeat="group in $ctrl.layerGroups">
        <div ng-if="$ctrl.isVisible(group)">
            <h3><a href="#/admin/layer/{{group.id}}">{{group.name}} <span class="glyphicon glyphicon-pencil"></span></a></h3>
            <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Einheit</th>
                    <th>Nachkommastellen</th>
                    <th style="width: 10%">Bearbeite Layer</th>
                    <th style="width: 10%">Bearbeite Daten</th>
                    <th style="width: 10%">Löschen</th>
                </tr>
            </thead>
            <tbody>
            <tr ng-repeat="layer in group.layers | orderBy: 'sortOrder' | filter: $ctrl.searchterm : layer.name">
                <td>
                    {{layer.sortOrder}}
                </td>
                <td ng-class="{'text-deleted': layer.isDeleted}">
                    {{layer.name}}
                </td>
                <td ng-class="{'text-deleted': layer.isDeleted}">
                    {{layer.unit}}
                </td>
                <td ng-class="{'text-deleted': layer.isDeleted}">
                    {{layer.decimals}}
                </td>
                <td>
                    <a href="#/admin/layer/{{layer.id}}"><span class="glyphicon glyphicon-pencil"></span></a>
                </td>
                <td>
                    <a href="#/admin/values/{{layer.id}}" ng-hide="layer.isDeleted"><span class="glyphicon glyphicon-th-list"></span></a>
                </td>
                <td>
                    <a><span ng-click="$ctrl.delete(layer)" class="glyphicon glyphicon-remove"></span></a>
                </td>
            </tr>
            </tbody>
            </table>
        </div>
    </div>
</div>