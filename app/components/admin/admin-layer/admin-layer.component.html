<div class="alert alert-danger" role="alert" ng-if="!$ctrl.security.isValid()">
    Sie müssen angemeldet sein um diesen Bereich zu nutzen
</div>

<div class="container" ng-if="$ctrl.security.isValid()">
    <div class="panel panel-default">
        <div class="panel-body">
            <a href="#/admin/topics" class="btn btn-default" role="button">Themen ändern</a>
            <a href="#/admin/layers" class="btn btn-default" role="button">Themenbereiche ändern</a>
        </div>  
    </div>
</div>

<div class="container"  ng-if="$ctrl.security.isValid()">
    <h1>Bearbeite Layer {{$ctrl.layer.name}}</h1>
    <form>
        <div class="form-group">
            <div>{{$ctrl.selectedParent}}</div>
            <label for="categoryName">Überbegriff / Oberkategorie</label>
            <select ng-options="parent.name for parent in $ctrl.parents track by parent.id"
                    ng-model="$ctrl.selectedParent" 
                    id="categoryName" 
                    class="form-control"/>
        </div>
        <div class="form-group">
            <label for="layerName">Name</label>
            <input type="text" ng-model="$ctrl.layer.name" id="layerName" class="form-control"/>
        </div>
        <div class="form-group">
            <label for="layerDescription">Beschreibung</label>
            <textarea rows="6"  type="text" ng-model="$ctrl.layer.description" id="layerDescription" class="form-control"></textarea>
        </div>
        <div class="form-group">
            <label for="layerInfos">Informationen</label>
            <textarea rows="6" type="text" ng-model="$ctrl.layer.infos" id="layerInfos" class="form-control"></textarea>
        </div>
        <div class="form-group">
            <label for="layerUnit">Einheit</label>
            <input type="text" ng-model="$ctrl.layer.unit" id="layerUnit" class="form-control"/>
        </div>
        <div class="form-group">
            <label for="layerDecimals">Nachkommastellen</label>
            <input type="text" ng-model="$ctrl.layer.decimals" id="layerDecimals" class="form-control"/>
        </div>
        <div class="form-group">
            <label for="layerCalculation">Berechnung</label>
            <input type="text" ng-model="$ctrl.layer.calculation" id="layerCalculation" class="form-control"/>
        </div>
        <div class="form-group">
            <label for="layerCalculation">Quelle</label>
            <input type="text" ng-model="$ctrl.layer.source" id="layerSource" class="form-control"/>
        </div>
        
        <div class="form-group">
            <label for="layerSortOrder">SortOrder</label>
            <input type="text" ng-model="$ctrl.layer.sortOrder" id="layerSortOrder" class="form-control"/>
        </div>

        <div class="alert alert-info" ng-if="$ctrl.message">{{$ctrl.message}}</div>
        <button class="btn btn-default" ng-click="$ctrl.save()" ng-if="!$ctrl.layer.isDeleted">Speichern</button>
        <button class="btn btn-default" ng-click="$ctrl.delete()" ng-if="!$ctrl.layer.isDeleted">Löschen</button>
        <button class="btn btn-default" ng-click="$ctrl.undelete()" ng-if="$ctrl.layer.isDeleted">Wiederherstellen</button>
        <a class="btn" href="#/admin/layers">Abbrechen</a>
    </form>
</div>